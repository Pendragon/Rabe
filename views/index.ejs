<%include header.ejs %>
<%include nav.ejs %>

<div class="container-fluid">
<div class="row">
  <div class="col-md-2">
  	<div class="panel panel-default">
  		<div class="panel-heading"><h1 class="panel-title">Thermometre interieur</h1></div>
      <div class="panel-body"><canvas id="interieur" width="60" height="400">Canvas not available.</canvas></div>
    </div>
  </div>
  <div class="col-md-2">
    <div class="panel panel-default">
      <div class="panel-heading"><h1 class="panel-title">Thermometre exterieur</h1></div>
  		<div class="panel-body"><canvas id="exterieur" width="60" height="400">Canvas not available.</canvas></div>
  	</div>
  </div>
  <div class="col-md-8">
      <div id='courbe'></div>
  </div>
</div>
</div>

<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/data.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<script src="js/thermo-ui.js"></script>

<script>

function maj_courbe()
{
  $.get('/thermos/interieur/history', function(data, status) {
    drawHisto('courbe', data);
  });
}

function maj_thermo() 
{
	$.get('/thermos/interieur', function(data, status) {
		drawThermo('interieur', "rgb(255,0,0)", data);
	});

	$.get('/thermos/exterieur', function(data, status) {
		drawThermo('exterieur', "rgb(255,0,0)", data);
	});		
}

$(document).ready(function() {
	maj_thermo();
  maj_courbe();
	setInterval(maj_thermo, 10000);
  setInterval(maj_courbe, 100000);
});

</script>

<%include footer.ejs%>
